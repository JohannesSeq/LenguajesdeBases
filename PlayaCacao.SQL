--Creacion del Schema para la base de datos
CREATE TABLESPACE PLAYA_CACAO_TBS
DATAFILE 'D:\Oracle\oradata\XE\PLAYA_CACAO_TBS.dbf' SIZE 100M;

--Creacion de la tabla de Clientes
CREATE TABLE CLIENTES(
    CEDULA NUMBER CONSTRAINT CEDULA_PK PRIMARY KEY,
    NOMBRE VARCHAR(50),
    APELLIDO VARCHAR(50),
    NUMERO_DE_TELEFONO VARCHAR(20)
)

ALTER TABLE CLIENTES MOVE TABLESPACE PLAYA_CACAO_TBS;

--Creacion de la tabla de empleados
CREATE TABLE EMPLEADOS(
    ID_EMPLEADO NUMBER CONSTRAINT ID_EMPLEADO_PK PRIMARY KEY,
    ID_DEPARTAMENTO NUMBER,
    ID_PUESTO NUMBER,
    NOMBRE VARCHAR(50),
    APELLIDO VARCHAR(50),
    SALARIO NUMBER,
    CEDULA NUMBER
)

ALTER TABLE EMPLEADOS MOVE TABLESPACE PLAYA_CACAO_TBS;

--Creacion de la tabla correo_clientes
CREATE TABLE CORREO_CLIENTES(
    DIRECCION_DE_CORREO VARCHAR(100) PRIMARY KEY,
    CORREO_DE_RESPALDO VARCHAR(100),
    CEDULA_CLIENTE NUMBER
)

ALTER TABLE CORREO_CLIENTES MOVE TABLESPACE PLAYA_CACAO_TBS;

ALTER TABLE CORREO_CLIENTES
ADD CONSTRAINT CEDULA_CLIENTE_CORREO_FK
    FOREIGN KEY(CEDULA_CLIENTE)
    REFERENCES CLIENTES(CEDULA);

--Creacion de la tabla correo_empleados
CREATE TABLE CORREO_EMPLEADOS(
    DIRECCION_DE_CORREO VARCHAR(100) PRIMARY KEY,
    CORREO_DE_RESPALDO VARCHAR(100),
    ID_EMPLEADO_CORREO NUMBER
)

ALTER TABLE CORREO_EMPLEADOS MOVE TABLESPACE PLAYA_CACAO_TBS;

ALTER TABLE CORREO_EMPLEADOS
ADD CONSTRAINT ID_EMPLEADO_CORREO_FK
    FOREIGN KEY(ID_EMPLEADO_CORREO)
    REFERENCES EMPLEADOS(ID_EMPLEADO);

--Creacion de la tabla Usuarios
CREATE TABLE USUARIOS(
    ID_USUARIO NUMBER CONSTRAINT ID_USUARIO_PK PRIMARY KEY,
    CORREO VARCHAR(100),
    PASSWORD VARCHAR(100),
    ROL_ID NUMBER
)

ALTER TABLE USUARIOS MOVE TABLESPACE PLAYA_CACAO_TBS;

/*ALTER TABLE USUARIOS
ADD CONSTRAINT USUARIO_CLIENTE_CORREO_FK
    FOREIGN KEY(CORREO)
    REFERENCES CORREO_CLIENTES(DIRECCION_DE_CORREO);

ALTER TABLE USUARIOS
ADD CONSTRAINT USUARIO_EMPLEADO_CORREO_FK
    FOREIGN KEY(CORREO)
    REFERENCES CORREO_EMPLEADOS(DIRECCION_DE_CORREO);*/
    
--Insercion de datos en la tabla de Clientes
INSERT INTO CLIENTES(CEDULA,NOMBRE,APELLIDO,NUMERO_DE_TELEFONO)
VALUES (1,'Johannes','Sequeira','1234-5678');
COMMIT;

--Insercion de datos en la tabla correo clientes
INSERT INTO CORREO_CLIENTES(DIRECCION_DE_CORREO,CORREO_DE_RESPALDO,CEDULA_CLIENTE)
VALUES ('Johannes@gmail.com','Sequeira@gmail.com',1);
COMMIT;

--Insercion de datos en la tabla de empleados
INSERT INTO EMPLEADOS(ID_EMPLEADO,ID_DEPARTAMENTO,ID_PUESTO,NOMBRE,APELLIDO,SALARIO,CEDULA)
VALUES (1,1,1,'Steven','Guerra',1000000,5678);
COMMIT;

--Insercion de datos en la tabla correo empleados
INSERT INTO CORREO_EMPLEADOS(DIRECCION_DE_CORREO,CORREO_DE_RESPALDO,ID_EMPLEADO_CORREO)
VALUES ('steven@playacacao.com','steven@gmail.com',1);
COMMIT;

--Insercion de datos en la tabla de Usuarios
INSERT INTO USUARIOS(ID_USUARIO,CORREO,PASSWORD,ROL_ID)
VALUES (1,'Johannes@gmail.com','ABC123',1);
COMMIT;

--Insercion de datos en la tabla de Usuarios
INSERT INTO USUARIOS(ID_USUARIO,CORREO,PASSWORD,ROL_ID)
VALUES (2,'Steven@playacacao.com','ABC123',2);
COMMIT;

